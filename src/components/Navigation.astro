---
export interface Props {
	currentPage?: "home" | "past-work" | "vouches" | "academy" | "store" | "hire";
}

const { currentPage } = Astro.props;
---

<nav class="nav" id="main-nav">
	<div class="nav-glow"></div>
	<div class="nav-container">
		<a href="/" class="nav-logo">
			<div class="logo-wrapper">
				<img src="/src/public/Images/Logo.jpg" alt="Qustreso Studios" width={50} height={50} />
				<div class="logo-ring"></div>
			</div>
			<span class="logo-text">QUSTRESO</span>
		</a>

		<div class="nav-menu" id="nav-menu">
			<div class="nav-links">
				<a href="/" class={`nav-link ${currentPage === "home" ? "active" : ""}`}>
					<span data-text="HOME">HOME</span>
					<div class="nav-highlight"></div>
				</a>
				<a href="/past-work" class={`nav-link ${currentPage === "past-work" ? "active" : ""}`}>
					<span data-text="PAST WORK">PAST WORK</span>
					<div class="nav-highlight"></div>
				</a>
				<a href="/vouches" class={`nav-link ${currentPage === "vouches" ? "active" : ""}`}>
					<span data-text="VOUCHES">VOUCHES</span>
					<div class="nav-highlight"></div>
				</a>
				<a href="/academy" class={`nav-link ${currentPage === "academy" ? "active" : ""}`}>
					<span data-text="ACADEMY">ACADEMY</span>
					<div class="nav-highlight"></div>
				</a>
				<a href="/store" class={`nav-link ${currentPage === "store" ? "active" : ""}`}>
					<span data-text="STORE">STORE</span>
					<div class="nav-highlight"></div>
				</a>
				<a href="/hire" class={`nav-link ${currentPage === "hire" ? "active" : ""}`}>
					<span data-text="HIRE">HIRE</span>
					<div class="nav-highlight"></div>
				</a>
			</div>

			<div class="nav-social">
				<a href="https://discord.gg/qustreso" class="social-link discord" title="Discord" target="_blank">
					<div class="social-icon">
						<svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
							<path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515a.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0a12.64 12.64 0 0 0-.617-1.25a.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057a19.9 19.9 0 0 0 5.993 3.03a.078.078 0 0 0 .084-.028a14.09 14.09 0 0 0 1.226-1.994a.076.076 0 0 0-.041-.106a13.107 13.107 0 0 1-1.872-.892a.077.077 0 0 1-.008-.128a10.2 10.2 0 0 0 .372-.292a.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127a12.299 12.299 0 0 1-1.873.892a.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028a19.839 19.839 0 0 0 6.002-3.03a.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03zM8.02 15.33c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.956-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.956 2.418-2.157 2.418zm7.975 0c-1.183 0-2.157-1.085-2.157-2.419c0-1.333.955-2.419 2.157-2.419c1.21 0 2.176 1.096 2.157 2.42c0 1.333-.946 2.418-2.157 2.418z"/>
						</svg>
					</div>
					<div class="social-pulse"></div>
				</a>
				<a href="https://twitter.com/QUSTRESO" class="social-link twitter" title="Twitter" target="_blank">
					<div class="social-icon">
						<svg width="20" height="20" fill="currentColor" viewBox="0 0 24 24">
							<path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
						</svg>
					</div>
					<div class="social-pulse"></div>
				</a>
			</div>
		</div>

		<button class="nav-burger" id="nav-burger" aria-label="Toggle navigation" aria-expanded="false">
			<span class="burger-line"></span>
			<span class="burger-line"></span>
			<span class="burger-line"></span>
		</button>
	</div>

	<div class="mobile-menu-overlay" id="mobile-menu-overlay"></div>
</nav>

<style>
	.nav {
		position: fixed;
		top: 0;
		left: 0;
		right: 0;
		z-index: 1000;
		padding: 20px 0;
		background: rgb(0 0 0 / 85%);
		backdrop-filter: blur(20px) saturate(150%);
		border-bottom: 1px solid rgb(255 255 255 / 10%);
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		will-change: transform;
	}

	.nav-glow {
		position: absolute;
		bottom: -1px;
		left: 0;
		right: 0;
		height: 1px;
		background: linear-gradient(90deg, transparent, rgb(255 255 255 / 40%), transparent);
		animation: glowSlide 3s ease-in-out infinite;
	}

	@keyframes glowSlide {
		0%,
		100% {
			transform: translateX(-100%);
		}

		50% {
			transform: translateX(100%);
		}
	}

	.nav.scrolled {
		padding: 15px 0;
		background: rgb(0 0 0 / 95%);
		box-shadow: 0 10px 30px rgb(0 0 0 / 50%);
	}

	.nav-container {
		max-width: 1800px;
		margin: 0 auto;
		padding: 0 40px;
		display: flex;
		justify-content: space-between;
		align-items: center;
	}

	.nav-logo {
		display: flex;
		align-items: center;
		gap: 15px;
		text-decoration: none;
		transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		z-index: 1001;
	}

	.nav-logo:hover {
		transform: scale(1.05);
	}

	.nav-logo:hover .logo-ring {
		transform: scale(1.2);
		opacity: 1;
	}

	.logo-wrapper {
		position: relative;
		width: 50px;
		height: 50px;
	}

	.nav-logo img {
		width: 100%;
		height: 100%;
		border-radius: 50%;
		position: relative;
		z-index: 2;
	}

	.logo-ring {
		position: absolute;
		inset: -5px;
		border: 2px solid rgb(255 255 255 / 30%);
		border-radius: 50%;
		opacity: 0;
		transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
		animation: ringPulse 2s ease-in-out infinite;
	}

	@keyframes ringPulse {
		0%,
		100% {
			transform: scale(1);
		}

		50% {
			transform: scale(1.05);
		}
	}

	.logo-text {
		font-size: 1.25rem;
		font-weight: 900;
		letter-spacing: 2px;
		color: white;
		position: relative;
	}

	.logo-text::after {
		content: "QUSTRESO";
		position: absolute;
		top: 0;
		left: 0;
		z-index: -1;
		filter: blur(8px);
		opacity: 0;
		transition: opacity 0.3s ease;
	}

	.nav-logo:hover .logo-text::after {
		opacity: 0.5;
	}

	.nav-menu {
		display: flex;
		align-items: center;
		gap: 40px;
	}

	.nav-links {
		display: flex;
		gap: 40px;
		align-items: center;
	}

	.nav-link {
		position: relative;
		color: white;
		text-decoration: none;
		font-weight: 600;
		font-size: 0.875rem;
		letter-spacing: 1px;
		padding: 10px 0;
		transition: color 0.3s ease;
		overflow: hidden;
	}

	.nav-link span {
		position: relative;
		display: inline-block;
		transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.nav-link:hover span {
		transform: translateY(-2px);
	}

	.nav-highlight {
		position: absolute;
		bottom: 0;
		left: 0;
		width: 100%;
		height: 2px;
		background: linear-gradient(90deg, transparent, white, transparent);
		transform: scaleX(0);
		transform-origin: center;
		transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.nav-link:hover .nav-highlight,
	.nav-link.active .nav-highlight {
		transform: scaleX(1);
	}

	.nav-link.active {
		color: white;
	}

	.nav-link.active::after {
		content: "";
		position: absolute;
		top: -5px;
		left: 50%;
		transform: translateX(-50%);
		width: 5px;
		height: 5px;
		background: white;
		border-radius: 50%;
		box-shadow: 0 0 10px rgb(255 255 255 / 50%);
		animation: activeDot 2s ease-in-out infinite;
	}

	@keyframes activeDot {
		0%,
		100% {
			opacity: 0.5;
			transform: translateX(-50%) scale(0.8);
		}

		50% {
			opacity: 1;
			transform: translateX(-50%) scale(1);
		}
	}

	.nav-social {
		display: flex;
		gap: 15px;
	}

	.social-link {
		position: relative;
		width: 40px;
		height: 40px;
		border-radius: 50%;
		display: flex;
		align-items: center;
		justify-content: center;
		background: rgba(255, 255, 255, 0.1);
		backdrop-filter: blur(10px);
		border: 1px solid rgb(255 255 255 / 10%);
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		overflow: hidden;
		color: white;
	}

	.social-icon {
		display: flex;
		align-items: center;
		justify-content: center;
		z-index: 2;
		transition: transform 0.3s ease;
	}

	.social-link:hover .social-icon {
		transform: scale(1.1) rotateZ(5deg);
	}

	.social-pulse {
		position: absolute;
		inset: 0;
		border-radius: 50%;
		background: radial-gradient(circle, rgb(255 255 255 / 20%), transparent);
		transform: scale(0);
		transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
	}

	.social-link:hover .social-pulse {
		transform: scale(2);
		opacity: 0;
	}

	.social-link.discord:hover {
		background: rgb(88 101 242 / 20%);
		border-color: rgb(88 101 242);
		transform: translateY(-3px);
		box-shadow: 0 10px 25px rgb(88 101 242 / 30%);
	}

	.social-link.twitter:hover {
		background: rgb(29 161 242 / 20%);
		border-color: rgb(29 161 242);
		transform: translateY(-3px);
		box-shadow: 0 10px 25px rgb(29 161 242 / 30%);
	}

	.nav-burger {
		display: none;
		position: relative;
		width: 48px;
		height: 48px;
		background: none;
		border: none;
		cursor: pointer;
		padding: 0;
		z-index: 1001;
		align-items: center;
		justify-content: center;
	}

	.burger-line {
		position: absolute;
		left: 12px;
		width: 24px;
		height: 2px;
		background: white;
		transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
		transform-origin: center;
	}

	.burger-line:nth-child(1) {
		top: 16px;
	}

	.burger-line:nth-child(2) {
		top: 23px;
	}

	.burger-line:nth-child(3) {
		top: 30px;
	}

	.nav-burger:hover .burger-line {
		background: rgb(255 255 255 / 80%);
	}

	.nav-burger.active .burger-line:nth-child(1) {
		transform: translateY(7px) rotate(45deg);
	}

	.nav-burger.active .burger-line:nth-child(2) {
		opacity: 0;
		transform: scaleX(0);
	}

	.nav-burger.active .burger-line:nth-child(3) {
		transform: translateY(-7px) rotate(-45deg);
	}

	.mobile-menu-overlay {
		position: fixed;
		inset: 0;
		background: rgb(0 0 0 / 50%);
		opacity: 0;
		visibility: hidden;
		transition: all 0.3s ease;
		z-index: 999;
	}

	.mobile-menu-overlay.active {
		opacity: 1;
		visibility: visible;
	}

	/* Mobile styles */
	@media (width <= 1024px) {
		.nav-container {
			padding: 0 30px;
		}

		.nav-menu {
			position: fixed;
			top: 0;
			right: -100%;
			height: 100vh;
			width: 100vw;
			max-width: 100vw;
			background: rgb(0 0 0 / 98%);
			backdrop-filter: blur(20px);
			flex-direction: column;
			justify-content: flex-start;
			padding: 0;
			gap: 50px;
			transition: right 0.4s cubic-bezier(0.4, 0, 0.2, 1);
			z-index: 1000;
			overflow-y: auto;
			box-shadow: none;
		}

		.nav-menu.active {
			right: 0;
		}

		.nav-links {
			flex-direction: column;
			gap: 30px;
			width: 100%;
			align-items: flex-start;
			padding: 100px 40px 40px;
		}

		.nav-link {
			font-size: 1rem;
			padding: 12px 0;
			width: 100%;
			display: block;
		}

		.nav-social {
			gap: 20px;
			justify-content: flex-start;
			padding: 0 40px 40px;
		}

		.nav-burger {
			display: flex;
		}
	}

	@media (width <= 768px) {
		.nav {
			padding: 15px 0;
		}

		.nav.scrolled {
			padding: 12px 0;
		}

		.nav-container {
			padding: 0 20px;
		}

		.logo-wrapper {
			width: 40px;
			height: 40px;
		}

		.logo-text {
			font-size: 1.125rem;
		}

		.nav-menu {
			padding: 80px 30px 30px;
		}

		.nav-link {
			font-size: 1rem;
			padding: 15px 0;
			touch-action: manipulation;
		}

		.social-link {
			width: 44px;
			height: 44px;
		}
	}

	@media (width <= 480px) {
		.nav-container {
			padding: 0 15px;
		}

		.logo-text {
			font-size: 1rem;
			letter-spacing: 1px;
		}

		.nav-menu {
			width: min(280px, 85vw);
			padding: 70px 25px 25px;
		}
	}

	body.menu-open {
		overflow: hidden;
	}

	@media (hover: none) and (pointer: coarse) {
		.nav-link,
		.social-link,
		.nav-burger {
			-webkit-tap-highlight-color: transparent;
		}

		.nav-link {
			padding: 15px 0;
		}
	}
</style>

<script>
	document.addEventListener("DOMContentLoaded", () => {
		const nav = document.querySelector("#main-nav");
		const burger = document.querySelector("#nav-burger");
		const navMenu = document.querySelector("#nav-menu");
		const overlay = document.querySelector("#mobile-menu-overlay");
		const navLinks = navMenu?.querySelectorAll(".nav-link");

		window.addEventListener("scroll", () => {
			const currentScroll = window.scrollY;

			if (currentScroll > 100) {
				nav?.classList.add("scrolled");
			} else {
				nav?.classList.remove("scrolled");
			}
		});

		function toggleMenu() {
			const isOpen = burger?.classList.contains("active");

			if (isOpen) {
				closeMenu();
			} else {
				openMenu();
			}
		}

		function openMenu() {
			burger?.classList.add("active");
			navMenu?.classList.add("active");
			overlay?.classList.add("active");
			document.body.classList.add("menu-open");
			burger?.setAttribute("aria-expanded", "true");
		}

		function closeMenu() {
			burger?.classList.remove("active");
			navMenu?.classList.remove("active");
			overlay?.classList.remove("active");
			document.body.classList.remove("menu-open");
			burger?.setAttribute("aria-expanded", "false");
		}

		burger?.addEventListener("click", toggleMenu);
		overlay?.addEventListener("click", closeMenu);

		if (navLinks)
			for (const link of navLinks) {
				link.addEventListener("click", () => {
					if (window.innerWidth <= 1024) {
						closeMenu();
					}
				});
			}

		document.addEventListener("keydown", (event_) => {
			if (event_.key === "Escape" && burger?.classList.contains("active")) {
				closeMenu();
			}
		});

		let resizeTimer: ReturnType<typeof setTimeout>;
		window.addEventListener("resize", () => {
			clearTimeout(resizeTimer);
			resizeTimer = setTimeout(() => {
				if (window.innerWidth > 1024) {
					closeMenu();
				}
			}, 250);
		});
	});
</script> 